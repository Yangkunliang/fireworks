<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>笔记平台智能推荐系统架构</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', 'PingFang SC', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f7fa;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            font-size: 24px;
            margin-bottom: 30px;
            font-weight: 600;
        }
        
        .architecture {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .layer-row {
            display: flex;
            gap: 20px;
            align-items: stretch;
        }
        
        .main-layer {
            flex: 1;
            background: linear-gradient(135deg, #e3f2fd 0%, #f8f9ff 100%);
            border: 2px solid #e1e8ed;
            border-radius: 12px;
            padding: 20px;
            position: relative;
            min-height: 220px;
        }
        
        .layer-title {
            font-size: 18px;
            font-weight: bold;
            color: #1565c0;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .layer-icon {
            width: 24px;
            height: 24px;
            background: #1565c0;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }
        
        .components-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin-top: 10px;
        }
        
        .component-box {
            background: white;
            border: 1px solid #d1d9e0;
            border-radius: 8px;
            padding: 12px 8px;
            text-align: center;
            font-size: 13px;
            color: #495057;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .component-box:hover {
            border-color: #1565c0;
            box-shadow: 0 2px 8px rgba(21, 101, 192, 0.15);
            transform: translateY(-2px);
        }
        
        .component-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 6px;
        }
        
        .component-desc {
            font-size: 11px;
            color: #6c757d;
        }
        
        .flow-arrow {
            width: 100%;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .flow-arrow::before {
            content: '';
            width: 80%;
            height: 2px;
            background: linear-gradient(90deg, #1565c0, #42a5f5);
            position: absolute;
        }
        
        .flow-arrow::after {
            content: '▼';
            background: white;
            color: #1565c0;
            font-size: 16px;
            padding: 0 10px;
            font-weight: bold;
        }
        
        .platform-layer {
            background: linear-gradient(135deg, #f3e5f5 0%, #fce4ec 100%);
            border: 2px solid #e1bee7;
        }
        
        .platform-layer .layer-title {
            color: #7b1fa2;
        }
        
        .platform-layer .layer-icon {
            background: #7b1fa2;
        }
        
        .service-layer {
            background: linear-gradient(135deg, #e8f5e8 0%, #f1f8e9 100%);
            border: 2px solid #c8e6c9;
        }
        
        .service-layer .layer-title {
            color: #2e7d32;
        }
        
        .service-layer .layer-icon {
            background: #2e7d32;
        }
        
        .data-layer {
            background: linear-gradient(135deg, #fff3e0 0%, #fef7f0 100%);
            border: 2px solid #ffccbc;
        }
        
        .data-layer .layer-title {
            color: #e65100;
        }
        
        .data-layer .layer-icon {
            background: #e65100;
        }
        
        .side-panel {
            width: 200px;
            background: linear-gradient(135deg, #263238 0%, #37474f 100%);
            border-radius: 12px;
            padding: 20px;
            color: white;
        }
        
        .side-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #81c784;
        }
        
        .side-item {
            background: rgba(255,255,255,0.1);
            border-radius: 6px;
            padding: 8px 12px;
            margin-bottom: 8px;
            font-size: 13px;
            transition: all 0.3s ease;
        }
        
        .side-item:hover {
            background: rgba(255,255,255,0.2);
            transform: translateX(5px);
        }
        
        .tech-badge {
            display: inline-block;
            background: #42a5f5;
            color: white;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 10px;
            margin: 2px;
        }
        
        .connection-line {
            position: absolute;
            width: 2px;
            background: #42a5f5;
            opacity: 0.6;
        }
        
        .data-flow {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background: rgba(66, 165, 245, 0.1);
            border-radius: 6px;
            border-left: 4px solid #42a5f5;
        }
        
        .flow-text {
            font-size: 12px;
            color: #1565c0;
            font-weight: 500;
        }
        
        .performance-indicator {
            position: absolute;
            top: 10px;
            right: 15px;
            background: rgba(76, 175, 80, 0.2);
            color: #2e7d32;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }
        
        @media (max-width: 1200px) {
            .layer-row {
                flex-direction: column;
            }
            .side-panel {
                width: 100%;
            }
        }
        
        @media (max-width: 768px) {
            .components-grid {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            }
            .container {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>📚 笔记平台智能推荐系统工程架构</h1>
        
        <div class="intro-section">
            <div class="intro-box">
                <h3>💡 系统概述</h3>
                <p>本推荐系统采用经典的"召回-排序-重排"架构，通过多层漏斗逐步筛选，从海量内容中为用户精准推荐感兴趣的笔记内容。整个系统分为4个核心层级，每层负责不同的职责。</p>
            </div>
        </div>
        
        <div class="architecture">
            
            <!-- 第一层：数据采集与处理 -->
            <div class="layer-row">
                <div class="main-layer data-layer">
                    <div class="performance-indicator">实时+离线</div>
                    <div class="layer-title">
                        <div class="layer-icon">1</div>
                        数据采集与预处理层
                    </div>
                    <div class="data-flow">
                        <span class="flow-text">多源数据接入</span>
                        <span>→</span>
                        <span class="flow-text">实时清洗</span>
                        <span>→</span>
                        <span class="flow-text">特征提取</span>
                    </div>
                    <div class="components-grid">
                        <div class="component-box">
                            <div class="component-title">行为埋点</div>
                            <div class="component-desc">点击/浏览/停留<br/>收藏/分享/评论</div>
                            <div class="tech-badge">Kafka</div>
                        </div>
                        <div class="component-box">
                            <div class="component-title">内容解析</div>
                            <div class="component-desc">NLP文本处理<br/>图像特征提取</div>
                            <div class="tech-badge">BERT</div>
                        </div>
                        <div class="component-box">
                            <div class="component-title">用户画像</div>
                            <div class="component-desc">兴趣标签<br/>学习偏好分析</div>
                            <div class="tech-badge">Spark</div>
                        </div>
                        <div class="component-box">
                            <div class="component-title">知识图谱</div>
                            <div class="component-desc">笔记关联关系<br/>知识点结构化</div>
                            <div class="tech-badge">Neo4j</div>
                        </div>
                    </div>
                    <div class="layer-explanation">
                        <h4>🔍 第一层详解：数据是推荐系统的基础</h4>
                        <p>这一层负责收集和处理所有原始数据，为后续的算法提供"食材"。就像做菜需要新鲜食材一样，推荐算法需要高质量的数据。</p>
                        <div class="term-explain">
                            <div class="term-name">行为埋点</div>
                            <div class="term-desc">在APP各个位置"埋"代码，记录用户的每一个动作，如点击了哪篇笔记、看了多长时间等</div>
                        </div>
                        <div class="term-explain">
                            <div class="term-name">内容解析</div>
                            <div class="term-desc">用AI技术理解笔记内容，提取关键词、主题、情感等特征，让机器"看懂"内容</div>
                        </div>
                        <div class="term-explain">
                            <div class="term-name">用户画像</div>
                            <div class="term-desc">根据用户行为给用户"贴标签"，如"喜欢技术文章"、"偏爱深度内容"等</div>
                        </div>
                        <div class="term-explain">
                            <div class="term-name">知识图谱</div>
                            <div class="term-desc">建立笔记之间的关系网络，如"机器学习"和"Python"相关，形成知识地图</div>
                        </div>
                    </div>
                </div>
                
                <div class="side-panel">
                    <div class="side-title">🔧 技术栈</div>
                    <div class="side-item">数据存储<br/>MySQL + Redis + ES</div>
                    <div class="side-item">流处理<br/>Kafka + Flink</div>
                    <div class="side-item">批处理<br/>Spark + HDFS</div>
                    <div class="side-item">特征存储<br/>ClickHouse</div>
                    <div class="side-item">模型服务<br/>TensorFlow Serving</div>
                </div>
            </div>
            
            <div class="flow-arrow"></div>
            
            <!-- 第二层：算法模型层 -->
            <div class="layer-row">
                <div class="main-layer platform-layer">
                    <div class="performance-indicator">离线训练</div>
                    <div class="layer-title">
                        <div class="layer-icon">2</div>
                        算法模型训练层
                    </div>
                    <div class="data-flow">
                        <span class="flow-text">特征工程</span>
                        <span>→</span>
                        <span class="flow-text">模型训练</span>
                        <span>→</span>
                        <span class="flow-text">效果评估</span>
                    </div>
                    <div class="components-grid">
                        <div class="component-box">
                            <div class="component-title">召回模型</div>
                            <div class="component-desc">协同过滤<br/>内容召回/双塔DNN</div>
                            <div class="tech-badge">ItemCF</div><div class="tech-badge">DeepFM</div>
                        </div>
                        <div class="component-box">
                            <div class="component-title">排序模型</div>
                            <div class="component-desc">Wide&Deep<br/>多目标学习</div>
                            <div class="tech-badge">MMOE</div><div class="tech-badge">DIN</div>
                        </div>
                        <div class="component-box">
                            <div class="component-title">序列模型</div>
                            <div class="component-desc">学习路径推荐<br/>知识点关联</div>
                            <div class="tech-badge">LSTM</div><div class="tech-badge">GNN</div>
                        </div>
                        <div class="component-box">
                            <div class="component-title">冷启动</div>
                            <div class="component-desc">新用户引导<br/>内容热度分析</div>
                            <div class="tech-badge">LDA</div><div class="tech-badge">Word2Vec</div>
                        </div>
                    </div>
                    <div class="layer-explanation">
                        <h4>🧠 第二层详解：训练推荐算法的"大脑"</h4>
                        <p>这一层是系统的核心，使用机器学习训练各种模型。就像训练一个助手，让它学会理解用户喜好和内容特点。</p>
                        <div class="term-explain">
                            <div class="term-name">召回模型</div>
                            <div class="term-desc">从成千上万篇笔记中快速找出可能感兴趣的候选内容，类似"海选"阶段</div>
                        </div>
                        <div class="term-explain">
                            <div class="term-name">排序模型</div>
                            <div class="term-desc">对候选内容进行精确打分排序，预测用户点击概率，类似"精选"阶段</div>
                        </div>
                        <div class="term-explain">
                            <div class="term-name">序列模型</div>
                            <div class="term-desc">考虑用户的浏览历史顺序，推荐符合学习路径的内容</div>
                        </div>
                        <div class="term-explain">
                            <div class="term-name">冷启动</div>
                            <div class="term-desc">解决新用户没有历史数据时的推荐问题，通过内容热度等方式推荐</div>
                        </div>
                    </div>
                </div>
                
                <div class="side-panel">
                    <div class="side-title">📊 业务指标</div>
                    <div class="side-item">点击率 CTR > 8%</div>
                    <div class="side-item">停留时长 > 2min</div>
                    <div class="side-item">学习完成率 > 60%</div>
                    <div class="side-item">用户留存 > 75%</div>
                    <div class="side-item">内容覆盖率 > 85%</div>
                </div>
            </div>
            
            <div class="flow-arrow"></div>
            
            <!-- 第三层：在线服务层 -->
            <div class="layer-row">
                <div class="main-layer service-layer">
                    <div class="performance-indicator">< 100ms</div>
                    <div class="layer-title">
                        <div class="layer-icon">3</div>
                        在线推荐服务层
                    </div>
                    <div class="data-flow">
                        <span class="flow-text">召回候选</span>
                        <span>→</span>
                        <span class="flow-text">排序打分</span>
                        <span>→</span>
                        <span class="flow-text">策略重排</span>
                    </div>
                    <div class="components-grid">
                        <div class="component-box">
                            <div class="component-title">多路召回</div>
                            <div class="component-desc">个性化+热门+关联<br/>候选集生成</div>
                            <div class="tech-badge">1000+</div>
                        </div>
                        <div class="component-box">
                            <div class="component-title">粗排筛选</div>
                            <div class="component-desc">轻量级模型<br/>快速过滤</div>
                            <div class="tech-badge">Top200</div>
                        </div>
                        <div class="component-box">
                            <div class="component-title">精排打分</div>
                            <div class="component-desc">深度模型<br/>个性化打分</div>
                            <div class="tech-badge">Top50</div>
                        </div>
                        <div class="component-box">
                            <div class="component-title">重排优化</div>
                            <div class="component-desc">多样性调整<br/>业务规则干预</div>
                            <div class="tech-badge">Top20</div>
                        </div>
                    </div>
                    <div class="layer-explanation">
                        <h4>⚡ 第三层详解：实时推荐服务的"生产线"</h4>
                        <p>用户打开APP时，这一层在100毫秒内完成推荐计算。采用漏斗结构，逐层筛选，平衡推荐质量和响应速度。</p>
                        <div class="term-explain">
                            <div class="term-name">多路召回 (1000+)</div>
                            <div class="term-desc">同时使用多种策略召回候选内容：个性化推荐、热门内容、相似内容等</div>
                        </div>
                        <div class="term-explain">
                            <div class="term-name">粗排筛选 (→200)</div>
                            <div class="term-desc">使用简单快速的模型，快速过滤掉明显不合适的内容</div>
                        </div>
                        <div class="term-explain">
                            <div class="term-name">精排打分 (→50)</div>
                            <div class="term-desc">使用复杂的深度学习模型，精确预测用户对每篇笔记的兴趣度</div>
                        </div>
                        <div class="term-explain">
                            <div class="term-name">重排优化 (→20)</div>
                            <div class="term-desc">最后调整，确保推荐结果多样性，避免同类内容扎堆</div>
                        </div>
                    </div>
                </div>
                
                <div class="side-panel">
                    <div class="side-title">🚀 分发场景</div>
                    <div class="side-item">首页信息流</div>
                    <div class="side-item">相关笔记推荐</div>
                    <div class="side-item">学习路径规划</div>
                    <div class="side-item">知识点扩展</div>
                    <div class="side-item">个人学习计划</div>
                </div>
            </div>
            
            <div class="flow-arrow"></div>
            
            <!-- 第四层：效果监控层 -->
            <div class="layer-row">
                <div class="main-layer">
                    <div class="performance-indicator">实时监控</div>
                    <div class="layer-title">
                        <div class="layer-icon">4</div>
                        效果监控与优化层
                    </div>
                    <div class="data-flow">
                        <span class="flow-text">A/B实验</span>
                        <span>→</span>
                        <span class="flow-text">效果评估</span>
                        <span>→</span>
                        <span class="flow-text">策略迭代</span>
                    </div>
                    <div class="components-grid">
                        <div class="component-box">
                            <div class="component-title">实验平台</div>
                            <div class="component-desc">流量分配<br/>策略对比测试</div>
                            <div class="tech-badge">A/B Test</div>
                        </div>
                        <div class="component-box">
                            <div class="component-title">指标监控</div>
                            <div class="component-desc">实时大盘<br/>异常告警</div>
                            <div class="tech-badge">Grafana</div>
                        </div>
                        <div class="component-box">
                            <div class="component-title">模型评估</div>
                            <div class="component-desc">离线验证<br/>效果回归分析</div>
                            <div class="tech-badge">MLflow</div>
                        </div>
                        <div class="component-box">
                            <div class="component-title">智能调参</div>
                            <div class="component-desc">超参数优化<br/>自动化调优</div>
                            <div class="tech-badge">AutoML</div>
                        </div>
                    </div>
                    <div class="layer-explanation">
                        <h4>📊 第四层详解：系统的"体检医生"</h4>
                        <p>持续监控推荐效果，及时发现问题并优化。就像定期体检一样，确保推荐系统始终保持最佳状态。</p>
                        <div class="term-explain">
                            <div class="term-name">A/B实验</div>
                            <div class="term-desc">将用户分成两组，测试不同推荐策略的效果，类似药物临床试验</div>
                        </div>
                        <div class="term-explain">
                            <div class="term-name">指标监控</div>
                            <div class="term-desc">实时监控点击率、停留时长等关键指标，异常时立即报警</div>
                        </div>
                        <div class="term-explain">
                            <div class="term-name">模型评估</div>
                            <div class="term-desc">定期评估模型性能，确保推荐质量不下降</div>
                        </div>
                        <div class="term-explain">
                            <div class="term-name">智能调参</div>
                            <div class="term-desc">自动调整模型参数，持续优化推荐效果</div>
                        </div>
                    </div>
                </div>
                
                <div class="side-panel">
                    <div class="side-title">⚡ 系统保障</div>
                    <div class="side-item">服务可用性 99.9%</div>
                    <div class="side-item">推荐延迟 < 100ms</div>
                    <div class="side-item">模型更新周期 1天</div>
                    <div class="side-item">灰度发布机制</div>
                    <div class="side-item">降级兜底策略</div>
                </div>
            </div>
        </div>
        
        <div class="summary-section">
            <div class="intro-box">
                <h3>🎯 总结：完整的推荐流程</h3>
                <p><strong>简单来说</strong>：收集数据 → 训练模型 → 实时推荐 → 监控优化，四个环节循环运转。</p>
                <p><strong>核心理念</strong>：通过机器学习理解用户兴趣和内容特征，在合适的时间为用户推荐合适的笔记内容，提升学习效率和用户体验。</p>
            </div>
        </div>
    </div>
    
    <script>
        // 添加悬停效果
        document.querySelectorAll('.component-box').forEach(box => {
            box.addEventListener('mouseenter', function() {
                this.style.borderColor = '#1565c0';
                this.style.boxShadow = '0 4px 12px rgba(21, 101, 192, 0.2)';
            });
            
            box.addEventListener('mouseleave', function() {
                this.style.borderColor = '#d1d9e0';
                this.style.boxShadow = 'none';
            });
        });
        
        // 添加点击动画
        document.querySelectorAll('.tech-badge').forEach(badge => {
            badge.addEventListener('click', function() {
                this.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    this.style.transform = 'scale(1)';
                }, 150);
            });
        });
    </script>
</body>
</html>
